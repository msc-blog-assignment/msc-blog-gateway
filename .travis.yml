language: node_js
node_js:
- '8'
cache:
  yarn: true
services:
- docker
install:
- yarn
- yarn lint
- yarn docker
  - provider: script
    script: docker login -u "$DOCKER_USERNAME" -p "$DOCKER_PASSWORD" && yarn docker:tag && yarn docker:push
    on:
      branch: master